<!doctype html>
<html lang="sr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AI1team — ROI Kalkulator</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <link rel="icon" type="image/png" href="A1Favicon.png" />
  <style>
    body { font-family: 'Inter', sans-serif; margin:0; color:#111; background:#fff; }
    header { display:flex; justify-content:space-between; align-items:center; padding:20px 32px; border-bottom:2px solid #f3f3f3; }
    h1 { font-size:32px; color:#0b3d91; margin-bottom:8px; }
    p.lead { font-size:18px; color:#333; margin-top:0; }
    .wrap { max-width:960px; margin:40px auto; padding:0 16px; }
    .btn { background:#d4af37; color:#fff; border:none; border-radius:6px; padding:12px 20px; font-weight:600; cursor:pointer; }
    .btn:hover { background:#b38e1e; }
    .btn:disabled { background:#ccc; cursor:not-allowed; }
    .grid { display:grid; grid-template-columns:1fr 1fr; gap:12px; }
    input, select { width:100%; padding:10px; border:1px solid #ccc; border-radius:6px; box-sizing:border-box; }
    label { font-size:14px; font-weight:600; display:block; margin-bottom:6px; }
    .card { border:1px solid #ddd; border-radius:10px; padding:20px; margin-top:24px; }
    footer { text-align:center; margin:60px 0 24px; font-size:13px; color:#444; }
    footer img { height:28px; margin-top:12px; }
    .results { margin-top:18px; padding:14px; border-radius:8px; background:#f7f9fb; border:1px solid #e6eef8; }
    .result-row { display:flex; justify-content:space-between; padding:6px 0; font-weight:600; color:#0b3d91; }
    .small { font-weight:400; color:#333; font-size:14px; }
    .muted { font-weight:400; color:#666; font-size:13px; }
    .checkbox { display:inline-block; align-items:center; gap: 10px; }
    @media (max-width:720px) {
      h1 { font-size:28px; color:#0b3d91; margin-bottom:8px; text-align: center;}
      p.lead { font-size:16px; color:#333; margin-top:0; text-align: center;}
      .grid { grid-template-columns:1fr; }
      header { flex-direction:column; gap:12px; align-items:center; }
    }
  </style>
</head>
<body>
  <header>
    <img class="logo" src="aiteam-logo.png" alt="AI1team" style="height:70px;">
    <div class="logo-text" style="font-size:14px; color:#0b3d91;">AI rešenja za pametniji e-commerce</div>
  </header>

  <div class="wrap">
    <section id="hero">
      <h1>Koliko AI može smanjiti vaše zalihe?</h1>
      <p class="lead">Unesite svoje brojke i za 30 sekundi saznajte potencijalnu godišnju uštedu i ROI.</p>
    </section>

    <form id="roiForm" class="card" onsubmit="return submitToBackend(event)">
      <h2>Podaci o kompaniji</h2>
      <div class="grid">
        <div>
          <label>Naziv kompanije</label>
          <input name="company" id="company" required>
        </div>
        <div>
          <label>Kontakt osoba</label>
          <input name="contact" id="contact" required>
        </div>
        <div>
          <label>Email</label>
          <input type="email" name="email" id="email" required>
        </div>
      </div>

      <h2 style="margin-top:18px;">Operativni podaci</h2>
      <div class="grid">
        <div>
          <label>Godišnji prihod €</label>
          <input type="number" name="annualRevenue" id="annualRevenue" min="0" step="0.01" required>
        </div>
        <div>
          <label>Vrednost zaliha €</label>
          <input type="number" name="inventoryValue" id="inventoryValue" min="0" step="0.01" required>
        </div>
        <div>
          <label>Overstock %</label>
          <input type="number" name="overstockPct" id="overstockPct" min="0" max="100" step="0.01" required>
        </div>
        <div>
          <label>Out-of-Stock %</label>
          <input type="number" name="oosPct" id="oosPct" min="0" max="100" step="0.01" required>
        </div>
        <div>
          <label>Broj artikala SKU</label>
          <input type="number" name="sku" id="sku" min="0" step="1" required>
        </div>
        <div>
          <label>Broj skladišta</label>
          <input type="number" name="warehouses" id="warehouses" min="0" step="1" required>
        </div>
        <div>
          <label>Broj prodajnih kanala</label>
          <input type="number" name="channels" id="channels" min="0" step="1" required>
        </div>
        <div>
          <label>Očekivana AI preciznost %</label>
          <select name="accuracy" id="accuracy">
            <option value="70">70</option>
            <option value="80">80</option>
            <option value="85" selected>85</option>
            <option value="90">90</option>
            <option value="95">95</option>
          </select>
        </div>
      </div>

      <div class="checkbox" style="margin-top:16px;">
        <input type="checkbox" id="gdpr" required> 
      </div>
      <div class="checkbox" style="margin-left:4px;">
        <label for="gdpr" style="font-size:13px;" class="small">Slažem se sa obradom podataka radi ROI procene i ponude GDPR</label>
      </div>

      <div class="results" id="liveResults" aria-live="polite">
        <div class="result-row"><div class="muted">Procena godišnje uštede</div><div id="aiSavingsDisplay">-</div></div>
        <div class="result-row"><div class="muted">Mesečna pretplata (procena)</div><div id="monthlyFeeDisplay">-</div></div>
        <div class="result-row"><div class="muted">Godišnja pretplata</div><div id="annualFeeDisplay">-</div></div>
        <div class="result-row"><div class="muted">Procena ROI</div><div id="roiDisplay">-</div></div>
        <div style="margin-top:8px;" class="small">Rezultati se ažuriraju dok menjate polja. Pre slanja, vrednosti će biti uključene u poruci.</div>
      </div>

      <!-- Hidden values that will be sent to backend -->
      <input type="hidden" name="_next" id="_next" value="https://ai1team.com/thankyou.html">
      <input type="hidden" name="estimatedSavings" id="estimatedSavings">
      <input type="hidden" name="monthlyFee" id="monthlyFee">
      <input type="hidden" name="annualFee" id="annualFee">
      <input type="hidden" name="roiPercent" id="roiPercent">
      <input type="hidden" name="note" id="note">

      <div style="margin-top:16px;">
        <button type="submit" class="btn">Izračunaj ROI i pošalji</button>
      </div>
    </form>
  </div>

  <footer>
    AI1team © 2025 — Beograd · <a href="mailto:ninasaramia@gmail.com">ninasaramia@gmail.com</a><br>
    <img src="aiteam-logo.png" alt="AI1team" style="height:45px;">
  </footer>

  <script>
// ---------- Utility functions ----------
function cleanNumber(value) {
  return parseFloat(value.replace(/\./g, '').replace(',', '.')) || 0;
}

function formatCurrency(value) {
  return value.toLocaleString('de-DE');
}

function computeValues() {
  const annualRevenue = cleanNumber(document.getElementById('annualRevenue').value);
  const inventoryValue = cleanNumber(document.getElementById('inventoryValue').value);
  const overstockPct = parseFloat(document.getElementById('overstockPct').value) || 0;
  const oosPct = parseFloat(document.getElementById('oosPct').value) || 0;
  const sku = parseFloat(document.getElementById('sku').value) || 0;
  const warehouses = parseFloat(document.getElementById('warehouses').value) || 0;
  const channels = parseFloat(document.getElementById('channels').value) || 0;

  const overstockLoss = inventoryValue * (overstockPct / 100);
  const oosLoss = annualRevenue * (oosPct / 100);
  const aiSavings = (overstockLoss * 0.30) + (oosLoss * 0.40);

  let fee = 1000 + (300 * warehouses) + (200 * channels) + (150 * (sku / 1000));
  if (fee < 3000) fee = 3000;

  const monthlyFee = Math.round(fee);
  const annualFee = Math.round(fee * 12);
  const roi = (aiSavings - annualFee) / annualFee;
  const roiPercent = isFinite(roi) ? Math.round(roi * 10000) / 100 : null;

  return { aiSavings: Math.round(aiSavings), monthlyFee, annualFee, roiPercent };
}

function updateLiveDisplay() {
  const vals = computeValues();
  document.getElementById('aiSavingsDisplay').textContent = formatCurrency(vals.aiSavings) + ' €';
  document.getElementById('monthlyFeeDisplay').textContent = formatCurrency(vals.monthlyFee) + ' €';
  document.getElementById('annualFeeDisplay').textContent = formatCurrency(vals.annualFee) + ' €';
  document.getElementById('roiDisplay').textContent = vals.roiPercent !== null ? vals.roiPercent + ' %' : '-';
}

// Currency input formatting
['annualRevenue', 'inventoryValue'].forEach(id => {
  const el = document.getElementById(id);
  el.type = 'text';
  el.addEventListener('input', () => {
    let value = el.value.replace(/\D/g, '');
    if (value) {
      const numberValue = parseFloat(value);
      el.value = formatCurrency(numberValue);
    } else {
      el.value = '';
    }
    updateLiveDisplay();
  });
});

const inputs = ['overstockPct','oosPct','sku','warehouses','channels','accuracy'];
inputs.forEach(id => {
  const el = document.getElementById(id);
  if (el) el.addEventListener('input', updateLiveDisplay);
});
updateLiveDisplay();

// ---------- Submission logic ----------
function collectFormValues() {
  const vals = computeValues();
  document.getElementById('estimatedSavings').value = vals.aiSavings;
  document.getElementById('monthlyFee').value = vals.monthlyFee;
  document.getElementById('annualFee').value = vals.annualFee;
  document.getElementById('roiPercent').value = vals.roiPercent || '';
  document.getElementById('note').value = 'Computed using AI1team formula: 30% overstock recapture; 40% OOS recapture; base fees applied';

  return {
    company: document.getElementById('company').value.trim(),
    contact: document.getElementById('contact').value.trim(),
    email: document.getElementById('email').value.trim(),
    annualRevenue: document.getElementById('annualRevenue').value + ' €',
    inventoryValue: document.getElementById('inventoryValue').value + ' €',
    overstockPct: document.getElementById('overstockPct').value + ' %',
    oosPct: document.getElementById('oosPct').value + ' %',
    sku: formatCurrency(parseFloat(document.getElementById('sku').value) || 0),
    warehouses: formatCurrency(parseFloat(document.getElementById('warehouses').value) || 0),
    channels: formatCurrency(parseFloat(document.getElementById('channels').value) || 0),
    accuracy: document.getElementById('accuracy').value + ' %',
    estimatedSavings: formatCurrency(vals.aiSavings) + ' €',
    monthlyFee: formatCurrency(vals.monthlyFee) + ' €',
    annualFee: formatCurrency(vals.annualFee) + ' €',
    roiPercent: vals.roiPercent !== null ? vals.roiPercent + ' %' : '-',
    note: document.getElementById('note').value
  };
}

async function submitToBackend(e) {
  e.preventDefault();
  const data = collectFormValues();

  if (!data.company || !data.email) {
    alert('Popunite obavezna polja: Naziv kompanije i Email');
    return false;
  }

  const submitBtn = e.target.querySelector('button[type="submit"]');
  const originalText = submitBtn.textContent;
  submitBtn.disabled = true;
  submitBtn.textContent = 'Šalje se...';

  try {
    const resp = await fetch('https://formspree.io/f/xpwowped', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' },
      body: JSON.stringify(data)
    });
    if (resp.ok) {
      window.location.href = document.getElementById('_next').value;
    } else {
      submitBtn.disabled = false;
      submitBtn.textContent = originalText;
      alert('Došlo je do greške pri slanju. Pokušajte ponovo.');
    }
  } catch (err) {
    submitBtn.disabled = false;
    submitBtn.textContent = originalText;
    alert('Greška u konekciji. Pokušajte ponovo.');
  }
}
</script>



</body>
</html>
